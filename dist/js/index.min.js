"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){function t(t){this.data=t,this.walk(t)}function e(e,n){if(e&&"object"===(void 0===e?"undefined":_typeof(e)))return new t(e)}function n(){this.id=r++,this.subs=[]}function i(t,e,n){this.cb=n,this.vm=t,this.expOrFn=e,this.depIds={},this.getter="function"==typeof e?e:this.parseGetter(e),this.value=this.get()}function o(t,e){this.$vm=e,this.$el=this.isElementNode(t)?t:document.querySelector(t),this.$el&&(this.$fragment=this.node2Fragment(this.$el),this.init(),this.$el.appendChild(this.$fragment))}function s(t){this.$options=t||{};var n=this._data=this.$options.data,i=this;Object.keys(n).forEach(function(t){i._proxyData(t)}),this._initComputed(),e(n,this),this.$compile=new o(t.el||document.body,this)}t.prototype={walk:function(t){var e=this;Object.keys(t).forEach(function(n){e.convert(n,t[n])})},convert:function(t,e){this.defineReactive(this.data,t,e)},defineReactive:function(t,i,o){var s=new n,r=e(o);Object.defineProperty(t,i,{enumerable:!0,configurable:!1,get:function(){return n.target&&s.depend(),o},set:function(t){t!==o&&(o=t,r=e(t),s.notify())}})}};var r=0;n.prototype={addSub:function(t){this.subs.push(t)},depend:function(){n.target.addDep(this)},removeSub:function(t){var e=this.subs.indexOf(t);-1!=e&&this.subs.splice(e,1)},notify:function(){this.subs.forEach(function(t){t.update()})}},n.target=null,i.prototype={update:function(){this.run()},run:function(){var t=this.get(),e=this.value;t!==e&&(this.value=t,this.cb.call(this.vm,t,e))},addDep:function(t){this.depIds.hasOwnProperty(t.id)||(t.addSub(this),this.depIds[t.id]=t)},get:function(){n.target=this;var t=this.getter.call(this.vm,this.vm);return n.target=null,t},parseGetter:function(t){if(!/[^\w.$]/.test(t)){var e=t.split(".");return function(t){for(var n=0,i=e.length;n<i;n++){if(!t)return;t=t[e[n]]}return t}}}},o.prototype={node2Fragment:function(t){for(var e,n=document.createDocumentFragment();e=t.firstChild;)n.appendChild(e);return n},init:function(){this.compileElement(this.$fragment)},compileElement:function(t){var e=t.childNodes,n=this;[].slice.call(e).forEach(function(t){var e=t.textContent,i=/\{\{(.*)\}\}/;n.isElementNode(t)?n.compile(t):n.isTextNode(t)&&i.test(e)&&n.compileText(t,RegExp.$1),t.childNodes&&t.childNodes.length&&n.compileElement(t)})},compile:function(t){var e=t.attributes,n=this;[].slice.call(e).forEach(function(e){var i=e.name;if(n.isDirective(i)){var o=e.value,s=i.substring(2);n.isEventDirective(s)?c.eventHandler(t,n.$vm,o,s):c[s]&&c[s](t,n.$vm,o),t.removeAttribute(i)}})},compileText:function(t,e){c.text(t,this.$vm,e)},isDirective:function(t){return 0==t.indexOf("v-")},isEventDirective:function(t){return 0===t.indexOf("on")},isElementNode:function(t){return 1==t.nodeType},isTextNode:function(t){return 3==t.nodeType}};var c={text:function(t,e,n){this.bind(t,e,n,"text")},html:function(t,e,n){this.bind(t,e,n,"html")},model:function(t,e,n){this.bind(t,e,n,"model");var i=this,o=this._getVMVal(e,n);t.addEventListener("input",function(t){var s=t.target.value;o!==s&&(i._setVMVal(e,n,s),o=s)})},class:function(t,e,n){this.bind(t,e,n,"class")},bind:function(t,e,n,o){var s=a[o+"Updater"];s&&s(t,this._getVMVal(e,n)),new i(e,n,function(e,n){s&&s(t,e,n)})},eventHandler:function(t,e,n,i){var o=i.split(":")[1],s=e.$options.methods&&e.$options.methods[n];o&&s&&t.addEventListener(o,s.bind(e),!1)},_getVMVal:function(t,e){var n=t;return(e=e.split(".")).forEach(function(t){n=n[t]}),n},_setVMVal:function(t,e,n){var i=t;(e=e.split(".")).forEach(function(t,o){o<e.length-1?i=i[t]:i[t]=n})}},a={textUpdater:function(t,e){t.textContent=void 0===e?"":e},htmlUpdater:function(t,e){t.innerHTML=void 0===e?"":e},classUpdater:function(t,e,n){var i=t.className,o=(i=i.replace(n,"").replace(/\s$/,""))&&String(e)?" ":"";t.className=i+o+e},modelUpdater:function(t,e,n){t.value=void 0===e?"":e}};s.prototype={$watch:function(t,e,n){new i(this,t,e)},_proxyData:function(t,e,n){var i=this;e=e||Object.defineProperty(i,t,{configurable:!1,enumerable:!0,get:function(){return i._data[t]},set:function(e){i._data[t]=e}})},_initComputed:function(){var t=this,e=this.$options.computed;"object"===(void 0===e?"undefined":_typeof(e))&&Object.keys(e).forEach(function(n){Object.defineProperty(t,n,{get:"function"==typeof e[n]?e[n]:e[n].get,set:function(){}})})}};new s({el:"#app",data:{word:"Hello World!"},methods:{sayHi:function(){this.word="Hi, everybody!"}}})}();